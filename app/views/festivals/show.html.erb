<% agenda = Agenda.find_by(festival: ) %>

<div class='origin-center w-full'>
  <div id='festival_name'  class='font-mono text-2xl font-semibold p-6 max-w-sm mx-auto'>
    <%= festival.name %>
  </div>

  <%= form_tag update_agenda_festival_path(festival), method: :post do %>
    <div id='stages' class='columns-<%= festival.stages.count %> columns-md gap-4' >
      <% festival.stages.each do |stage| %>
      <div id='stage' class=''>
        <div id='stage_header' class='p4 border rounded'>
          <h2 class='text-xl font-bold mb-4'><%= stage.name %></h2>
        </div>
        <div id='stage_concerts'>
          <ul>
            <% stage.concerts.each do |concert| %>
              <div id=<%="concert_#{concert.id}"%> class='mb-2'>
                <li>
                  <%= check_box_tag "concerts[]", concert.id, id: "concert_#{concert.id}" %>
                  <%= concert.start_hour %> - <%= concert.group.name %>
                </li>
              </div>
            <% end %>
          </ul>
        </div>
      </div>
      <% end %>

      <%= submit_tag 'Generar Agenda', class: 'btn-primary float-right'%>
    </div>
  <% end %>

  <div id='agenda' class=''> 
    <%= render partial: 'agenda', locals: { agenda: } if !agenda.agenda_concerts.empty? %>
  </div>
</div>
